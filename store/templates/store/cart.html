{% extends 'store/base.html' %}

{% block title %}Корзина{% endblock %}

{% block content %}
<div class="container">
    <h2 class="section-title">Ваша корзина</h2>

    {% if cart.items.all %}
        <div style="background: var(--bg-card); padding: 2rem; border-radius: 8px; border: 1px solid #333;">
            <table style="width: 100%; border-collapse: collapse; color: #fff;">
                <thead>
                    <tr style="border-bottom: 1px solid #444; text-align: left;">
                        <th style="padding: 10px;">Автомобиль</th>
                        <th style="padding: 10px;">Цена</th>
                        <th style="padding: 10px;">Кол-во</th>
                        <th style="padding: 10px;">Действие</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in cart.items.all %}
                    <tr style="border-bottom: 1px solid #222;">
                        <td style="padding: 15px 10px;">
                            <strong style="color: var(--neon-blue);">{{ item.car.brand }}</strong> {{ item.car.model }}
                        </td>
                        <td style="padding: 15px 10px;">{{ item.car.price }} ₽</td>
                        <td style="padding: 15px 10px;">{{ item.quantity }}</td>
                        <td style="padding: 15px 10px;">
                            <a href="{% url 'remove_from_cart' item.id %}" style="color: #ff4444; text-decoration: none;">Удалить</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <div style="margin-top: 2rem; text-align: right;">
                <h3 style="font-size: 2rem;">Итого: <span style="color: var(--neon-blue);">{{ cart.get_total_price }} ₽</span></h3>
                <a href="{% url 'checkout' %}" class="btn btn-primary" style="display: inline-block; margin-top: 1rem;">Оформить заказ</a>
            </div>
        </div>
    {% else %}
        <p style="font-size: 1.2rem; color: var(--text-muted);">Ваша корзина пуста. <a href="{% url 'catalog' %}" style="color: var(--neon-blue);">Перейти в каталог</a></p>
    {% endif %}
</div>
{% endblock %}